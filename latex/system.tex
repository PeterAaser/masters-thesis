\chapter{30000 Lines Of Code}
\epigraph{Look at you, hacker. A pathetic creature of meat and bone. Panting and
sweating as you run through my corridors. How can you challenge a perfect
immortal machine?}
{SHODAN - System Shock}
Creating a cyborg is a massive undertaking, thus a quite extensive software
suite has been created to make research feasible.
This chapter will focus on the more mundane engineering aspects of the software
developed for this thesis while the next chapter will focus on the
reconfigurable reservoir computing module at the heart of the project.
The following section contains an overview of the design philosophy, and an
overview of the individual components which are discussed in the remainder of
the chapter.
\section{Design Philosophy}
As alluded to in the discussion of physical vs virtual robot in the previous
chapter, modularizing the cyborg is important not only as a practical matter.
While the chief purpose of the software system is to interface with neurons, the
design does not require this.
In fact, the guiding principle of the software system is to serve as a general
reservoir computing system, where neurons serve as one of many possible reservoirs.
This deviates from the conceptual cyborg presented in the previous chapter as
the current design does not require a feed forward neural net to be used to
process reservoir output.\\
% The basic requirements of the design are the following:
% \begin{description}
% \item [Reservoir Data Acquisition] For some generic reservoir $R$ the 
% \item [Reservoir Data Transformation] ???
% \item [Agent thingy] ???
% \item [Sensor Transformation] ???
% \item [Reservoir Perturbation] ???
% \end{description}
\\
% Discuss auxillary concerns such as user interaction and storage (and
% possibilities wrt storage)
\subsection{Implementation}
The system today is comprised of two separate projects, \emph{MEAME} and
\emph{SHODAN}.
The first project, MEAME, a ``clever'' pun on the similarity on the words MEA
and ``meme'', is responsible for interfacing with the lab software,
thus in the framework of the design philosophy it serves as an implementation
of a single reservoir.
\section{MEAME}
The MEAME project is responsible for handling the tasks closest to the neural
reservoir, and is therefore installed on a computer directly connected to the
MEA2100 system.
MEAME is split into two subsystems, both exposed by a unified \emph{REST
  interface}, enabling access to the lab equipment via a protocol built on top
of HTTP.

% TODO: Legg til git linker
Both MEAME and MEAME-DSP are available online, and have been implemented by the
author of this thesis.\\

The data acquisition part of MEAME is responsible for configuring recording
parameters such as samplerate and starting or stopping recordings.
It is built on top of a very thin windows only API provided by the equipment vendor, making
it abundantly clear that the cyborg project is pushing the equipment far beyond
its intended use, which at the same time is a point of pride and pain.
Once the data acquisition equipment has been configured MEAME exposes the
recorded data as a single continous stream which can be accessed via TCP.
Figure ??? shows the format of this data stream, which must be demultiplexed by
the receiver in order to separate data into the 60 individual channels.
In order to stimulate the neurons, the HTTP interface can also handle stimuli
requests, which are executed on a realtime capable digital signal processor
which is embedded on the lab equipment itself.
\subsection{MEAME-DSP}
When MEAME receives a stimuli request this is communicated to the DSP through a
simple protocol implemented by directly writing to registers.
The DSP maintains a list of \emph{Stim groups} which contain a list of electrode
numbers and a desired frequency.
Additionally the DSP is responsible for uploading which pattern to use when
stimulating an electrode, however the DSP itself does not expose an API for this
purpose since uploading a stimulus pattern simply consists of writing repeatedly
to a single register, meaning this task is better handled at a higher level.

\section{SHODAN}
SHODAN is a reservoir computing system, developed to be able to handle any
reservoir as long as the necessary transformations between reservoir output and
perturbing are supplied.
SHODAN is comprised of the following subsystems:
% Data acquisition
% Data storage/playback
% Frontend
% Agent control
% meme storage
% ???

\cleardoublepage

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../main"
%%% End: